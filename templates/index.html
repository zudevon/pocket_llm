<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Question Answering</title>
</head>
<body>
    <h1>Upload a PDF and Ask Questions</h1>

    <!-- PDF Upload Form -->
    <form action="/" method="post" enctype="multipart/form-data">
        <input type="file" name="pdf" required>
        <button type="submit">Upload PDF</button>
    </form>

    <!-- Message Display -->
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}

    <!-- Question Form -->
    <h2>Ask a Question</h2>
    <form id="question-form">
        <input type="text" name="question" placeholder="Enter your question" required>
        <button type="submit">Ask</button>
    </form>

    <p id="answer"></p>

    <script>
        document.getElementById("question-form").onsubmit = async function (e) {
            e.preventDefault();
            const question = document.querySelector("input[name='question']").value;

            const response = await fetch("/ask", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams({ "question": question })
            });
            const data = await response.json();
            document.getElementById("answer").innerText = data.answer || "Error getting answer.";
        };
    </script>
</body>
</html>
